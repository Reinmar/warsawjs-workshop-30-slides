<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Leaking listeners – JavaScript performance workshops</title>
</head>
<body>
	<h1>Leaking listeners – JavaScript performance workshops</h1>

	<p><button id="leak-resize-listener">Add window#resize listener</button></p>
	<p><button id="remove-resize-listener">Remove window#resize listener</button></p>

	<script>

document.getElementById( 'leak-resize-listener' ).addEventListener( 'click', function button1ClickListener() {
	const foo = Array.from( Array( 99999 ).keys() );

	window.addEventListener( 'resize', windowResizeListener );

	// 2nd
	// document.getElementById( 'remove-resize-listener' ).addEventListener( 'click', function button2ClickListener() {
	// 	console.log( 'button#click' );

	// 	window.removeEventListener( 'resize', windowResizeListener );

	// 	// 3rd
	// 	// ?
	// } );

	function windowResizeListener() {
		// 1st
		// console.log( 'window#resize', foo );
	}
}, { once: true } );

	</script>
</body>
</html>
